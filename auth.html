<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Twitch Auth Redirect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <p>Redirection en cours…</p>
<script>
(function () {
    // Vérifie hash et search
    var fragment = window.location.hash || window.location.search || "";
    if (fragment.startsWith("#") || fragment.startsWith("?")) fragment = fragment.substring(1);

    if (!fragment) {
        document.body.innerHTML = "<p>Erreur : aucun token reçu.</p>";
        return;
    }

    // Redirige vers l'app Android
    var target = "myapp://callback?" + fragment;
    window.location.replace(target);

    // Lien de secours
    setTimeout(function () {
        var a = document.createElement("a");
        a.href = target;
        a.textContent = "Ouvrir dans l’application";
        document.body.appendChild(document.createElement("br"));
        document.body.appendChild(a);
    }, 1200);
})();
</script>
</body>
</html>
